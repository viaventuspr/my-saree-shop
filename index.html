<!DOCTYPE html>
<html lang="si">
<head>
    <style>
        /* ... (‡∂î‡∂∫‡∑è‡∂ú‡∑ö ‡∂ö‡∂Ω‡∑í‡∂±‡∑ä CSS ‡∂ß‡∑í‡∂ö ‡∂∏‡∑ô‡∂≠‡∂± ‡∂≠‡∑í‡∂∫‡∑ô‡∂±‡∑ä‡∂± ‡∂Ø‡∑ô‡∂±‡∑ä‡∂±) ... */
        
        /* ‡∂Ö‡∂Ω‡∑î‡∂≠‡∑í‡∂±‡∑ä Loading indicator ‡∂ë‡∂ö‡∂ö‡∑ä */
        #loader {
            text-align: center;
            padding: 50px;
            font-size: 1.5rem;
            color: var(--primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="loader">‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂¥‡∑ñ‡∂ª‡∂´‡∂∫ ‡∑Ä‡∑ô‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑ì...</div>
        <div class="product-grid" id="productGrid"></div>
    </div>

    <script>
        // ‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª 1: ‡∂î‡∂∫‡∑è‡∂ú‡∑ö Google Sheet ‡∂ë‡∂ö‡∑ö "Publish to Web" CSV ‡∂Ω‡∑í‡∂±‡∑ä‡∂ö‡∑ä ‡∂ë‡∂ö ‡∂∏‡∑ô‡∂≠‡∂±‡∂ß ‡∂Ø‡∑è‡∂±‡∑ä‡∂±
        const SHEET_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRAOpyzVWaV89nxNt2zVkwHLGghvL3vW6xbvBmgYm9d1-pK9TblSzYkgTJnBnY8hfhZUu0JV6xp-T-X/pub?output=csv';

        let products = []; // ‡∂∏‡∑î‡∂Ω‡∑í‡∂±‡∑ä ‡∑Ñ‡∑í‡∑É‡∑ä ‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä‡∂ö‡∑ä
        let cart = [];

        // Google Sheet ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂ö‡∑í‡∂∫‡∑Ä‡∑ì‡∂∏
        async function fetchProductsFromSheet() {
            try {
                const response = await fetch(SHEET_CSV_URL);
                const data = await response.text();
                
                // CSV ‡∂ë‡∂ö ‡∂¥‡∑ö‡∑Ö‡∑í ‡∑Ä‡∂Ω‡∂ß ‡∂ö‡∂©‡∑è ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∑É‡∂ö‡∑É‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏
                const rows = data.split('\n').slice(1); 
                products = rows.filter(row => row.trim() !== '').map(row => {
                    // CSV ‡∑Ä‡∂Ω ‡∂ö‡∑ú‡∂∏‡∑è‡∑Ä‡∑ô‡∂±‡∑ä ‡∑Ä‡∑ô‡∂±‡∑ä‡∑Ä‡∑î‡∂´‡∑î ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∑Ä‡∑ô‡∂±‡∑ä ‡∂ö‡∂ª‡∂ú‡∑ê‡∂±‡∑ì‡∂∏
                    const cols = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/); 
                    return {
                        id: cols[0].replace(/"/g, ''),
                        name: cols[1].replace(/"/g, ''),
                        category: cols[2].replace(/"/g, ''),
                        price: parseInt(cols[3]),
                        originalPrice: parseInt(cols[4]),
                        color: cols[5].replace(/"/g, ''),
                        image: cols[6].replace(/"/g, ''),
                        description: cols[7].replace(/"/g, ''),
                        badge: cols[8].replace(/"/g, '')
                    };
                });

                document.getElementById('loader').style.display = 'none';
                displayProducts(products);
            } catch (error) {
                console.error('Error fetching data:', error);
                document.getElementById('loader').innerHTML = '‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂Ω‡∂∂‡∑è‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∑ö ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑í. ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.';
            }
        }

        function displayProducts(productsToDisplay) {
            const productGrid = document.getElementById('productGrid');
            productGrid.innerHTML = '';

            productsToDisplay.forEach((product, index) => {
                const productCard = `
                    <div class="product-card" style="animation-delay: ${index * 0.1}s">
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/400x500?text=No+Image'">
                            <span class="product-badge">${product.badge}</span>
                            <div class="product-actions">
                                <button class="action-btn" onclick="addToWishlist(${product.id})">‚ù§Ô∏è</button>
                                <button class="action-btn" onclick="quickView(${product.id})">üëÅÔ∏è</button>
                            </div>
                        </div>
                        <div class="product-info">
                            <div class="product-category">${product.category}</div>
                            <h3 class="product-name">${product.name}</h3>
                            <p class="product-description">${product.description}</p>
                            <div class="product-price">
                                <span class="price">‡∂ª‡∑î. ${product.price.toLocaleString()}</span>
                                <span class="price-original">‡∂ª‡∑î. ${product.originalPrice.toLocaleString()}</span>
                            </div>
                            <button class="add-to-cart-btn" onclick="addToCart(${product.id})">‡∂ö‡∂ª‡∂≠‡∑ä‡∂≠‡∂∫‡∂ß ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
                        </div>
                    </div>`;
                productGrid.innerHTML += productCard;
            });
        }

        // ‡∂ö‡∂ª‡∂≠‡∑ä‡∂≠‡∂∫‡∂ß ‡∂ë‡∂ö‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö function ‡∂ë‡∂ö
        function addToCart(id) {
            const product = products.find(p => p.id == id);
            cart.push(product);
            updateCart();
            toggleCart();
        }

        // ‡∂Ö‡∂±‡∑ô‡∂ö‡∑ä ‡∑É‡∑í‡∂∫‡∂Ω‡∑î‡∂∏ functions (toggleCart, updateCart, filterProducts ‡∂Ü‡∂Ø‡∑í‡∂∫) ‡∂î‡∂∫‡∑è‡∂ú‡∑ö ‡∂ö‡∂Ω‡∑í‡∂±‡∑ä code ‡∂ë‡∂ö‡∑ö ‡∑Ä‡∑í‡∂Ø‡∑í‡∑Ñ‡∂ß‡∂∏ ‡∂≠‡∑í‡∂∫‡∑ô‡∂±‡∑ä‡∂± ‡∂Ø‡∑ô‡∂±‡∑ä‡∂±.

        // ‡∑Ä‡∑ê‡∂©‡∑É‡∂ß‡∑Ñ‡∂± ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑‡∂∫‡∑ö‡∂Ø‡∑ì‡∂∏ ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂Ω‡∂∂‡∑è‡∂ú‡∑ê‡∂±‡∑ì‡∂∏
        window.onload = fetchProductsFromSheet;
    </script>
</body>
</html>
