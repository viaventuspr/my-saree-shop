<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>සිරි සාරි | Premium Saree Collection</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600&family=Playfair+Display:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8B4513; --primary-dark: #5D2E0F; --accent: #D4AF37;
            --text-dark: #2C1810; --bg-cream: #FAF6F0; --bg-white: #FFFFFF;
            --border: #E0D3C4;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Lato', sans-serif; background: var(--bg-cream); color: var(--text-dark); line-height: 1.6; }

        /* Mavuris Style Header */
        header {
            background: var(--bg-white);
            padding: 20px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            position: sticky; top: 0; z-index: 1000;
        }

        .logo { font-family: 'Playfair Display', serif; font-size: 2.2rem; color: var(--primary); font-weight: 700; text-decoration: none; }

        nav ul { list-style: none; display: flex; gap: 25px; }
        nav a { text-decoration: none; color: var(--text-dark); font-weight: 600; font-size: 0.9rem; text-transform: uppercase; }

        /* Main Collection Layout */
        .container { max-width: 1300px; margin: 40px auto; padding: 0 20px; display: grid; grid-template-columns: 250px 1fr; gap: 30px; }

        /* Sidebar Filter */
        .sidebar h3 { font-family: 'Playfair Display', serif; margin-bottom: 15px; font-size: 1.5rem; border-bottom: 2px solid var(--accent); padding-bottom: 5px; }
        .filter-group { margin-bottom: 25px; }
        .filter-group select { width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 5px; background: white; }

        /* Product Grid */
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }
        .product-card { background: white; border: 1px solid var(--border); transition: 0.3s; position: relative; cursor: pointer; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .product-image { width: 100%; height: 380px; object-fit: cover; }
        .product-info { padding: 15px; text-align: center; }
        .product-name { font-family: 'Cormorant Garamond', serif; font-size: 1.4rem; font-weight: 600; margin-bottom: 8px; }
        .price { font-size: 1.2rem; font-weight: 700; color: var(--primary); }

        .buy-btn {
            background: var(--primary); color: white; border: none; padding: 10px 20px;
            width: 100%; margin-top: 15px; cursor: pointer; font-weight: bold; transition: 0.3s;
        }
        .buy-btn:hover { background: var(--accent); color: var(--text-dark); }

        /* Loading */
        #loading { grid-column: 1/-1; text-align: center; padding: 50px; font-size: 1.2rem; }

        @media (max-width: 768px) {
            .container { grid-template-columns: 1fr; }
            header { flex-direction: column; gap: 15px; }
        }
    </style>
</head>
<body>

    <header>
        <a href="#" class="logo">සිරි සාරි</a>
        <nav>
            <ul>
                <li><a href="#">මුල් පිටුව</a></li>
                <li><a href="#">Cotton Silk</a></li>
                <li><a href="#">සාද සාරි</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <aside class="sidebar">
            <div class="filter-group">
                <h3>පෙරහන්</h3>
                <label>වර්ගය අනුව:</label>
                <select id="catFilter" onchange="displayProducts()">
                    <option value="all">සියල්ල</option>
                    <option value="Cotton">Cotton Silk</option>
                    <option value="Silk">Soft Silk</option>
                </select>
            </div>
        </aside>

        <main>
            <div id="loading">දත්ත පූරණය වෙමින් පවතී...</div>
            <div class="product-grid" id="productGrid"></div>
        </main>
    </div>

    <script>
        const sheetID = '1YNPAC7OCg47t-OBKaG91_q39qGU6MePatB8uL-rLVFg';
        const url = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?tqx=out:csv`;

        let allProducts = [];

        async function loadData() {
            try {
                const response = await fetch(url);
                const data = await response.text();
                
                // CSV පේළි වලට වෙන් කිරීම (කොමා වලින් වෙන් වූ දත්ත)
                const rows = data.split('\n').slice(1); 
                
                allProducts = rows.map(row => {
                    const cols = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                    return {
                        name: cols[0] ? cols[0].replace(/"/g, "") : "Saree",
                        price: cols[1] ? cols[1].replace(/"/g, "") : "0.00",
                        img: cols[2] ? cols[2].replace(/"/g, "").trim() : "",
                        cat: cols[3] ? cols[3].replace(/"/g, "").trim() : "Other"
                    };
                }).filter(p => p.img !== "");

                document.getElementById('loading').style.display = 'none';
                displayProducts();
            } catch (e) {
                document.getElementById('loading').innerText = "දත්ත ලබා ගැනීමේ දෝෂයකි. කරුණාකර Sheet එක Publish කර ඇත්දැයි බලන්න.";
            }
        }

        function displayProducts() {
            const grid = document.getElementById('productGrid');
            const filter = document.getElementById('catFilter').value;
            grid.innerHTML = '';

            allProducts.forEach(p => {
                if (filter === 'all' || p.cat === filter) {
                    grid.innerHTML += `
                        <div class="product-card">
                            <img src="${p.img}" class="product-image" onerror="this.src='https://via.placeholder.com/350'">
                            <div class="product-info">
                                <h3 class="product-name">${p.name}</h3>
                                <div class="price">රු. ${p.price}</div>
                                <button class="buy-btn" onclick="order('${p.name}')">ඇණවුම් කරන්න</button>
                            </div>
                        </div>
                    `;
                }
            });
        }

        function order(name) {
            const phone = "94771234567"; // ඔබේ අංකය මෙතැනට දමන්න
            window.open(`https://wa.me/${phone}?text=මම මේ සාරිය ඇණවුම් කිරීමට කැමතියි: ${name}`, '_blank');
        }

        window.onload = loadData;
    </script>
</body>
</html>
